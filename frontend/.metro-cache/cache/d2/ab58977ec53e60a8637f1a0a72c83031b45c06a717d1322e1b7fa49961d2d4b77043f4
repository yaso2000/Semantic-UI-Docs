{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":69,"index":114}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSaveResult = useSaveResult;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[2], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  function useSaveResult() {\n    const [hasSubscription, setHasSubscription] = (0, _react.useState)(false);\n    const [saving, setSaving] = (0, _react.useState)(false);\n    const [checkingSubscription, setCheckingSubscription] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkSubscription();\n    }, []);\n    const checkSubscription = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        if (!token) {\n          setHasSubscription(false);\n          setCheckingSubscription(false);\n          return;\n        }\n        const response = await fetch(`${API_URL}/api/user-profile/check-subscription`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setHasSubscription(data.has_subscription);\n        }\n      } catch (error) {\n        console.error('Error checking subscription:', error);\n      } finally {\n        setCheckingSubscription(false);\n      }\n    };\n    const saveResult = async params => {\n      if (!hasSubscription) {\n        Alert.default.alert('غير متاح', 'حفظ النتائج متاح للمشتركين فقط. اشترك في إحدى الباقات للاستفادة من هذه الميزة.', [{\n          text: 'حسناً'\n        }]);\n        return false;\n      }\n      try {\n        setSaving(true);\n        const token = await AsyncStorage.default.getItem('token');\n        const response = await fetch(`${API_URL}/api/user-results/save`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify(params)\n        });\n        if (response.ok) {\n          Alert.default.alert('تم الحفظ', 'تم حفظ النتيجة في ملفك الشخصي بنجاح');\n          return true;\n        } else {\n          const error = await response.json();\n          Alert.default.alert('خطأ', error.detail || 'حدث خطأ أثناء الحفظ');\n          return false;\n        }\n      } catch (error) {\n        console.error('Error saving result:', error);\n        Alert.default.alert('خطأ', 'حدث خطأ أثناء الحفظ');\n        return false;\n      } finally {\n        setSaving(false);\n      }\n    };\n    return {\n      hasSubscription,\n      checkingSubscription,\n      saving,\n      saveResult,\n      checkSubscription\n    };\n  }\n});","lineCount":91,"map":[[12,2,16,0,"exports"],[12,9,16,0],[12,10,16,0,"useSaveResult"],[12,23,16,0],[12,26,16,0,"useSaveResult"],[12,39,16,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[14,42,2,0],[14,45,2,0,"require"],[14,52,2,0],[14,53,2,0,"_dependencyMap"],[14,67,2,0],[15,2,2,0],[15,6,2,0,"AsyncStorage"],[15,18,2,0],[15,21,2,0,"_interopDefault"],[15,36,2,0],[15,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[15,73,2,0],[16,2,2,69],[16,6,2,69,"_reactNativeWebDistExportsAlert"],[16,37,2,69],[16,40,2,69,"require"],[16,47,2,69],[16,48,2,69,"_dependencyMap"],[16,62,2,69],[17,2,2,69],[17,6,2,69,"Alert"],[17,11,2,69],[17,14,2,69,"_interopDefault"],[17,29,2,69],[17,30,2,69,"_reactNativeWebDistExportsAlert"],[17,61,2,69],[18,2,5,0],[18,8,5,6,"API_URL"],[18,15,5,13],[18,18,5,16,"process"],[18,25,5,23],[18,26,5,24,"env"],[18,29,5,27],[18,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[18,53,5,51],[18,57,5,55],[18,59,5,57],[19,2,16,7],[19,11,16,16,"useSaveResult"],[19,24,16,29,"useSaveResult"],[19,25,16,29],[19,27,16,32],[20,4,17,2],[20,10,17,8],[20,11,17,9,"hasSubscription"],[20,26,17,24],[20,28,17,26,"setHasSubscription"],[20,46,17,44],[20,47,17,45],[20,50,17,48],[20,54,17,48,"useState"],[20,60,17,56],[20,61,17,56,"useState"],[20,69,17,56],[20,71,17,57],[20,76,17,62],[20,77,17,63],[21,4,18,2],[21,10,18,8],[21,11,18,9,"saving"],[21,17,18,15],[21,19,18,17,"setSaving"],[21,28,18,26],[21,29,18,27],[21,32,18,30],[21,36,18,30,"useState"],[21,42,18,38],[21,43,18,38,"useState"],[21,51,18,38],[21,53,18,39],[21,58,18,44],[21,59,18,45],[22,4,19,2],[22,10,19,8],[22,11,19,9,"checkingSubscription"],[22,31,19,29],[22,33,19,31,"setCheckingSubscription"],[22,56,19,54],[22,57,19,55],[22,60,19,58],[22,64,19,58,"useState"],[22,70,19,66],[22,71,19,66,"useState"],[22,79,19,66],[22,81,19,67],[22,85,19,71],[22,86,19,72],[23,4,21,2],[23,8,21,2,"useEffect"],[23,14,21,11],[23,15,21,11,"useEffect"],[23,24,21,11],[23,26,21,12],[23,32,21,18],[24,6,22,4,"checkSubscription"],[24,23,22,21],[24,24,22,22],[24,25,22,23],[25,4,23,2],[25,5,23,3],[25,7,23,5],[25,9,23,7],[25,10,23,8],[26,4,25,2],[26,10,25,8,"checkSubscription"],[26,27,25,25],[26,30,25,28],[26,36,25,28,"checkSubscription"],[26,37,25,28],[26,42,25,40],[27,6,26,4],[27,10,26,8],[28,8,27,6],[28,14,27,12,"token"],[28,19,27,17],[28,22,27,20],[28,28,27,26,"AsyncStorage"],[28,40,27,38],[28,41,27,38,"default"],[28,48,27,38],[28,49,27,39,"getItem"],[28,56,27,46],[28,57,27,47],[28,64,27,54],[28,65,27,55],[29,8,28,6],[29,12,28,10],[29,13,28,11,"token"],[29,18,28,16],[29,20,28,18],[30,10,29,8,"setHasSubscription"],[30,28,29,26],[30,29,29,27],[30,34,29,32],[30,35,29,33],[31,10,30,8,"setCheckingSubscription"],[31,33,30,31],[31,34,30,32],[31,39,30,37],[31,40,30,38],[32,10,31,8],[33,8,32,6],[34,8,34,6],[34,14,34,12,"response"],[34,22,34,20],[34,25,34,23],[34,31,34,29,"fetch"],[34,36,34,34],[34,37,34,35],[34,40,34,38,"API_URL"],[34,47,34,45],[34,85,34,83],[34,87,34,85],[35,10,35,8,"headers"],[35,17,35,15],[35,19,35,17],[36,12,35,19,"Authorization"],[36,25,35,32],[36,27,35,34],[36,37,35,44,"token"],[36,42,35,49],[37,10,35,52],[38,8,36,6],[38,9,36,7],[38,10,36,8],[39,8,38,6],[39,12,38,10,"response"],[39,20,38,18],[39,21,38,19,"ok"],[39,23,38,21],[39,25,38,23],[40,10,39,8],[40,16,39,14,"data"],[40,20,39,18],[40,23,39,21],[40,29,39,27,"response"],[40,37,39,35],[40,38,39,36,"json"],[40,42,39,40],[40,43,39,41],[40,44,39,42],[41,10,40,8,"setHasSubscription"],[41,28,40,26],[41,29,40,27,"data"],[41,33,40,31],[41,34,40,32,"has_subscription"],[41,50,40,48],[41,51,40,49],[42,8,41,6],[43,6,42,4],[43,7,42,5],[43,8,42,6],[43,15,42,13,"error"],[43,20,42,18],[43,22,42,20],[44,8,43,6,"console"],[44,15,43,13],[44,16,43,14,"error"],[44,21,43,19],[44,22,43,20],[44,52,43,50],[44,54,43,52,"error"],[44,59,43,57],[44,60,43,58],[45,6,44,4],[45,7,44,5],[45,16,44,14],[46,8,45,6,"setCheckingSubscription"],[46,31,45,29],[46,32,45,30],[46,37,45,35],[46,38,45,36],[47,6,46,4],[48,4,47,2],[48,5,47,3],[49,4,49,2],[49,10,49,8,"saveResult"],[49,20,49,18],[49,23,49,21],[49,29,49,28,"params"],[49,35,49,52],[49,39,49,75],[50,6,50,4],[50,10,50,8],[50,11,50,9,"hasSubscription"],[50,26,50,24],[50,28,50,26],[51,8,51,6,"Alert"],[51,13,51,11],[51,14,51,11,"default"],[51,21,51,11],[51,22,51,12,"alert"],[51,27,51,17],[51,28,52,8],[51,38,52,18],[51,40,53,8],[51,120,53,88],[51,122,54,8],[51,123,54,9],[52,10,54,11,"text"],[52,14,54,15],[52,16,54,17],[53,8,54,25],[53,9,54,26],[53,10,55,6],[53,11,55,7],[54,8,56,6],[54,15,56,13],[54,20,56,18],[55,6,57,4],[56,6,59,4],[56,10,59,8],[57,8,60,6,"setSaving"],[57,17,60,15],[57,18,60,16],[57,22,60,20],[57,23,60,21],[58,8,61,6],[58,14,61,12,"token"],[58,19,61,17],[58,22,61,20],[58,28,61,26,"AsyncStorage"],[58,40,61,38],[58,41,61,38,"default"],[58,48,61,38],[58,49,61,39,"getItem"],[58,56,61,46],[58,57,61,47],[58,64,61,54],[58,65,61,55],[59,8,63,6],[59,14,63,12,"response"],[59,22,63,20],[59,25,63,23],[59,31,63,29,"fetch"],[59,36,63,34],[59,37,63,35],[59,40,63,38,"API_URL"],[59,47,63,45],[59,71,63,69],[59,73,63,71],[60,10,64,8,"method"],[60,16,64,14],[60,18,64,16],[60,24,64,22],[61,10,65,8,"headers"],[61,17,65,15],[61,19,65,17],[62,12,66,10],[62,26,66,24],[62,28,66,26],[62,46,66,44],[63,12,67,10,"Authorization"],[63,25,67,23],[63,27,67,25],[63,37,67,35,"token"],[63,42,67,40],[64,10,68,8],[64,11,68,9],[65,10,69,8,"body"],[65,14,69,12],[65,16,69,14,"JSON"],[65,20,69,18],[65,21,69,19,"stringify"],[65,30,69,28],[65,31,69,29,"params"],[65,37,69,35],[66,8,70,6],[66,9,70,7],[66,10,70,8],[67,8,72,6],[67,12,72,10,"response"],[67,20,72,18],[67,21,72,19,"ok"],[67,23,72,21],[67,25,72,23],[68,10,73,8,"Alert"],[68,15,73,13],[68,16,73,13,"default"],[68,23,73,13],[68,24,73,14,"alert"],[68,29,73,19],[68,30,73,20],[68,40,73,30],[68,42,73,32],[68,79,73,69],[68,80,73,70],[69,10,74,8],[69,17,74,15],[69,21,74,19],[70,8,75,6],[70,9,75,7],[70,15,75,13],[71,10,76,8],[71,16,76,14,"error"],[71,21,76,19],[71,24,76,22],[71,30,76,28,"response"],[71,38,76,36],[71,39,76,37,"json"],[71,43,76,41],[71,44,76,42],[71,45,76,43],[72,10,77,8,"Alert"],[72,15,77,13],[72,16,77,13,"default"],[72,23,77,13],[72,24,77,14,"alert"],[72,29,77,19],[72,30,77,20],[72,35,77,25],[72,37,77,27,"error"],[72,42,77,32],[72,43,77,33,"detail"],[72,49,77,39],[72,53,77,43],[72,74,77,64],[72,75,77,65],[73,10,78,8],[73,17,78,15],[73,22,78,20],[74,8,79,6],[75,6,80,4],[75,7,80,5],[75,8,80,6],[75,15,80,13,"error"],[75,20,80,18],[75,22,80,20],[76,8,81,6,"console"],[76,15,81,13],[76,16,81,14,"error"],[76,21,81,19],[76,22,81,20],[76,44,81,42],[76,46,81,44,"error"],[76,51,81,49],[76,52,81,50],[77,8,82,6,"Alert"],[77,13,82,11],[77,14,82,11,"default"],[77,21,82,11],[77,22,82,12,"alert"],[77,27,82,17],[77,28,82,18],[77,33,82,23],[77,35,82,25],[77,56,82,46],[77,57,82,47],[78,8,83,6],[78,15,83,13],[78,20,83,18],[79,6,84,4],[79,7,84,5],[79,16,84,14],[80,8,85,6,"setSaving"],[80,17,85,15],[80,18,85,16],[80,23,85,21],[80,24,85,22],[81,6,86,4],[82,4,87,2],[82,5,87,3],[83,4,89,2],[83,11,89,9],[84,6,90,4,"hasSubscription"],[84,21,90,19],[85,6,91,4,"checkingSubscription"],[85,26,91,24],[86,6,92,4,"saving"],[86,12,92,10],[87,6,93,4,"saveResult"],[87,16,93,14],[88,6,94,4,"checkSubscription"],[89,4,95,2],[89,5,95,3],[90,2,96,0],[91,0,96,1],[91,3]],"functionMap":{"names":["<global>","useSaveResult","useEffect$argument_0","checkSubscription","saveResult"],"mappings":"AAA;OCe;YCK;GDE;4BEE;GFsB;qBGE;GHsC;CDS"},"hasCjsExports":false},"type":"js/module"}]}