{"dependencies":[{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":211},"end":{"line":3,"column":50,"index":261}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":262},"end":{"line":4,"column":43,"index":305}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,'__esModule',{value:!0}),Object.defineProperty(e,\"default\",{enumerable:!0,get:function(){return o}});var t=r(d[0]),n=r(d[1]);function s(t,n,s){return n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,t}class o{constructor(n){s(this,\"onScaleBegin\",void 0),s(this,\"onScale\",void 0),s(this,\"onScaleEnd\",void 0),s(this,\"_focusX\",void 0),s(this,\"_focusY\",void 0),s(this,\"_currentSpan\",void 0),s(this,\"prevSpan\",void 0),s(this,\"initialSpan\",void 0),s(this,\"currentTime\",void 0),s(this,\"prevTime\",void 0),s(this,\"inProgress\",!1),s(this,\"spanSlop\",void 0),s(this,\"minSpan\",void 0),this.onScaleBegin=n.onScaleBegin,this.onScale=n.onScale,this.onScaleEnd=n.onScaleEnd,this.spanSlop=2*t.DEFAULT_TOUCH_SLOP,this.minSpan=0}onTouchEvent(t,s){this.currentTime=t.time;const o=t.eventType,h=s.trackedPointersCount,c=o===n.EventTypes.UP||o===n.EventTypes.ADDITIONAL_POINTER_UP||o===n.EventTypes.CANCEL;if((o===n.EventTypes.DOWN||c)&&(this.inProgress&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=0),c))return!0;const p=o===n.EventTypes.DOWN||o===n.EventTypes.ADDITIONAL_POINTER_UP||o===n.EventTypes.ADDITIONAL_POINTER_DOWN,u=o===n.EventTypes.ADDITIONAL_POINTER_UP,S=u?t.pointerId:void 0,l=u?h-1:h,v=s.getAbsoluteCoordsSum(),T=v.x/l,_=v.y/l;let E=0,P=0;s.trackedPointers.forEach((t,n)=>{n!==S&&(E+=Math.abs(t.abosoluteCoords.x-T),P+=Math.abs(t.abosoluteCoords.y-_))});const f=2*(E/l),O=2*(P/l),y=Math.hypot(f,O),b=this.inProgress;return this._focusX=T,this._focusY=_,this.inProgress&&(y<this.minSpan||p)&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=y),p&&(this.initialSpan=this.prevSpan=this._currentSpan=y),!this.inProgress&&y>=this.minSpan&&(b||Math.abs(y-this.initialSpan)>this.spanSlop)&&(this.prevSpan=this._currentSpan=y,this.prevTime=this.currentTime,this.inProgress=this.onScaleBegin(this)),o!==n.EventTypes.MOVE||(this._currentSpan=y,this.inProgress&&!this.onScale(this)||(this.prevSpan=this.currentSpan,this.prevTime=this.currentTime),!0)}calculateScaleFactor(t){return t<2?1:this.prevSpan>0?this.currentSpan/this.prevSpan:1}get currentSpan(){return this._currentSpan}get focusX(){return this._focusX}get focusY(){return this._focusY}get timeDelta(){return this.currentTime-this.prevTime}}});","lineCount":1,"map":[[1,90,5,15,"Object"],[1,97,5,15,"defineProperty"],[1,112,5,15,"e"],[1,114,5,15],[1,125,5,15,"enumerable"],[1,137,5,15],[1,139,5,15,"get"],[1,143,5,15],[1,161,5,15,"ScaleGestureDetector"],[1,162,5,15],[1,166,3,0],[1,170,3,0,"_constants"],[1,172,3,0,"r"],[1,174,3,0,"d"],[1,176,3,0],[1,180,4,0,"_interfaces"],[1,182,4,0,"r"],[1,184,4,0,"d"],[1,186,4,0],[1,190,1,0],[1,199,1,9,"_defineProperty"],[1,201,1,25,"obj"],[1,203,1,30,"key"],[1,205,1,35,"value"],[1,208,1,196],[1,215,1,48,"key"],[1,220,1,55,"obj"],[1,222,1,62,"Object"],[1,229,1,69,"defineProperty"],[1,244,1,84,"obj"],[1,246,1,89,"key"],[1,248,1,94],[1,249,1,96,"value"],[1,255,1,103,"value"],[1,257,1,110,"enumerable"],[1,269,1,122],[1,271,1,128,"configurable"],[1,285,1,142],[1,287,1,148,"writable"],[1,297,1,158],[1,301,1,176,"obj"],[1,303,1,180,"key"],[1,306,1,187,"value"],[1,308,1,203,"obj"],[1,309,1,208],[1,310,5,15],[1,316,5,21,"ScaleGestureDetector"],[1,318,6,2,"constructor"],[1,330,6,14,"callbacks"],[1,333,7,4,"_defineProperty"],[1,335,7,20,"this"],[1,340,7,26],[1,360,7,40,"undefined"],[1,363,9,4,"_defineProperty"],[1,365,9,20,"this"],[1,370,9,26],[1,385,9,35,"undefined"],[1,388,11,4,"_defineProperty"],[1,390,11,20,"this"],[1,395,11,26],[1,413,11,38,"undefined"],[1,416,13,4,"_defineProperty"],[1,418,13,20,"this"],[1,423,13,26],[1,438,13,35,"undefined"],[1,441,15,4,"_defineProperty"],[1,443,15,20,"this"],[1,448,15,26],[1,463,15,35,"undefined"],[1,466,17,4,"_defineProperty"],[1,468,17,20,"this"],[1,473,17,26],[1,493,17,40,"undefined"],[1,496,19,4,"_defineProperty"],[1,498,19,20,"this"],[1,503,19,26],[1,519,19,36,"undefined"],[1,522,21,4,"_defineProperty"],[1,524,21,20,"this"],[1,529,21,26],[1,548,21,39,"undefined"],[1,551,23,4,"_defineProperty"],[1,553,23,20,"this"],[1,558,23,26],[1,577,23,39,"undefined"],[1,580,25,4,"_defineProperty"],[1,582,25,20,"this"],[1,587,25,26],[1,603,25,36,"undefined"],[1,606,27,4,"_defineProperty"],[1,608,27,20,"this"],[1,613,27,26],[1,627,27,40],[1,630,29,4,"_defineProperty"],[1,632,29,20,"this"],[1,637,29,26],[1,653,29,36,"undefined"],[1,656,31,4,"_defineProperty"],[1,658,31,20,"this"],[1,663,31,26],[1,678,31,35,"undefined"],[1,681,33,4,"this"],[1,686,33,9,"onScaleBegin"],[1,699,33,24,"callbacks"],[1,701,33,34,"onScaleBegin"],[1,714,34,4,"this"],[1,719,34,9,"onScale"],[1,727,34,19,"callbacks"],[1,729,34,29,"onScale"],[1,737,35,4,"this"],[1,742,35,9,"onScaleEnd"],[1,753,35,22,"callbacks"],[1,755,35,32,"onScaleEnd"],[1,766,36,4,"this"],[1,771,36,9,"spanSlop"],[1,780,36,41],[1,782,36,20,"DEFAULT_TOUCH_SLOP"],[1,784,36,38,"DEFAULT_TOUCH_SLOP"],[1,803,37,4,"this"],[1,808,37,9,"minSpan"],[1,816,37,19],[1,817,38,2],[1,818,40,2,"onTouchEvent"],[1,831,40,15,"event"],[1,833,40,22,"tracker"],[1,836,41,4,"this"],[1,841,41,9,"currentTime"],[1,853,41,23,"event"],[1,855,41,29,"time"],[1,860,42,4],[1,866,42,10,"action"],[1,868,42,19,"event"],[1,870,42,25,"eventType"],[1,880,43,10,"numOfPointers"],[1,882,43,26,"tracker"],[1,884,43,34,"trackedPointersCount"],[1,905,44,10,"streamComplete"],[1,907,44,27,"action"],[1,911,44,38,"EventTypes"],[1,913,44,48,"EventTypes"],[1,924,44,49,"UP"],[1,928,44,55,"action"],[1,932,44,66,"EventTypes"],[1,934,44,76,"EventTypes"],[1,945,44,77,"ADDITIONAL_POINTER_UP"],[1,968,44,102,"action"],[1,972,44,113,"EventTypes"],[1,974,44,123,"EventTypes"],[1,985,44,124,"CANCEL"],[1,992,46,4],[1,996,46,8,"action"],[1,1000,46,19,"EventTypes"],[1,1002,46,29,"EventTypes"],[1,1013,46,30,"DOWN"],[1,1019,46,38,"streamComplete"],[1,1024,47,10,"this"],[1,1029,47,15,"inProgress"],[1,1042,48,8,"this"],[1,1047,48,13,"onScaleEnd"],[1,1058,48,24,"this"],[1,1064,49,8,"this"],[1,1069,49,13,"inProgress"],[1,1081,49,26],[1,1083,50,8,"this"],[1,1088,50,13,"initialSpan"],[1,1100,50,27],[1,1103,53,10,"streamComplete"],[1,1106,54,8],[1,1113,54,15],[1,1115,58,4],[1,1121,58,10,"configChanged"],[1,1123,58,26,"action"],[1,1127,58,37,"EventTypes"],[1,1129,58,47,"EventTypes"],[1,1140,58,48,"DOWN"],[1,1146,58,56,"action"],[1,1150,58,67,"EventTypes"],[1,1152,58,77,"EventTypes"],[1,1163,58,78,"ADDITIONAL_POINTER_UP"],[1,1186,58,103,"action"],[1,1190,58,114,"EventTypes"],[1,1192,58,124,"EventTypes"],[1,1203,58,125,"ADDITIONAL_POINTER_DOWN"],[1,1227,59,10,"pointerUp"],[1,1229,59,22,"action"],[1,1233,59,33,"EventTypes"],[1,1235,59,43,"EventTypes"],[1,1246,59,44,"ADDITIONAL_POINTER_UP"],[1,1268,60,10,"ignoredPointer"],[1,1270,60,27,"pointerUp"],[1,1272,60,39,"event"],[1,1274,60,45,"pointerId"],[1,1289,60,57,"undefined"],[1,1291,62,10,"div"],[1,1293,62,16,"pointerUp"],[1,1295,62,28,"numOfPointers"],[1,1297,62,44],[1,1299,62,48,"numOfPointers"],[1,1301,63,10,"coordsSum"],[1,1303,63,22,"tracker"],[1,1305,63,30,"getAbsoluteCoordsSum"],[1,1328,64,10,"focusX"],[1,1330,64,19,"coordsSum"],[1,1332,64,29,"x"],[1,1334,64,33,"div"],[1,1336,65,10,"focusY"],[1,1338,65,19,"coordsSum"],[1,1340,65,29,"y"],[1,1342,65,33,"div"],[1,1344,67,4],[1,1348,67,8,"devSumX"],[1,1350,67,18],[1,1352,68,8,"devSumY"],[1,1354,68,18],[1,1356,69,4,"tracker"],[1,1358,69,12,"trackedPointers"],[1,1374,69,28,"forEach"],[1,1382,69,36],[1,1383,69,37,"value"],[1,1385,69,44,"key"],[1,1390,70,10,"key"],[1,1394,70,18,"ignoredPointer"],[1,1398,74,6,"devSumX"],[1,1401,74,17,"Math"],[1,1406,74,22,"abs"],[1,1410,74,26,"value"],[1,1412,74,32,"abosoluteCoords"],[1,1428,74,48,"x"],[1,1430,74,52,"focusX"],[1,1433,75,6,"devSumY"],[1,1436,75,17,"Math"],[1,1441,75,22,"abs"],[1,1445,75,26,"value"],[1,1447,75,32,"abosoluteCoords"],[1,1463,75,48,"y"],[1,1465,75,52,"focusY"],[1,1471,77,4],[1,1477,79,10,"spanX"],[1,1479,79,25],[1,1482,77,17,"devSumX"],[1,1484,77,27,"div"],[1,1487,80,10,"spanY"],[1,1489,80,25],[1,1492,78,17,"devSumY"],[1,1494,78,27,"div"],[1,1497,81,10,"span"],[1,1499,81,17,"Math"],[1,1504,81,22,"hypot"],[1,1510,81,28,"spanX"],[1,1512,81,35,"spanY"],[1,1515,83,10,"wasInProgress"],[1,1517,83,26,"this"],[1,1522,83,31,"inProgress"],[1,1533,104,4],[1,1540,84,4,"this"],[1,1545,84,9,"_focusX"],[1,1553,84,19,"focusX"],[1,1555,85,4,"this"],[1,1560,85,9,"_focusY"],[1,1568,85,19,"focusY"],[1,1570,87,8,"this"],[1,1575,87,13,"inProgress"],[1,1588,87,28,"span"],[1,1590,87,35,"this"],[1,1595,87,40,"minSpan"],[1,1604,87,51,"configChanged"],[1,1609,88,6,"this"],[1,1614,88,11,"onScaleEnd"],[1,1625,88,22,"this"],[1,1631,89,6,"this"],[1,1636,89,11,"inProgress"],[1,1648,89,24],[1,1650,90,6,"this"],[1,1655,90,11,"initialSpan"],[1,1667,90,25,"span"],[1,1670,93,8,"configChanged"],[1,1674,94,6,"this"],[1,1679,94,11,"initialSpan"],[1,1691,94,25,"this"],[1,1696,94,30,"prevSpan"],[1,1705,94,41,"this"],[1,1710,94,46,"_currentSpan"],[1,1723,94,61,"span"],[1,1727,97,9,"this"],[1,1732,97,14,"inProgress"],[1,1744,97,28,"span"],[1,1747,97,36,"this"],[1,1752,97,41,"minSpan"],[1,1762,97,53,"wasInProgress"],[1,1765,97,70,"Math"],[1,1770,97,75,"abs"],[1,1774,97,79,"span"],[1,1776,97,86,"this"],[1,1781,97,91,"initialSpan"],[1,1794,97,106,"this"],[1,1799,97,111,"spanSlop"],[1,1811,98,6,"this"],[1,1816,98,11,"prevSpan"],[1,1825,98,22,"this"],[1,1830,98,27,"_currentSpan"],[1,1843,98,42,"span"],[1,1845,99,6,"this"],[1,1850,99,11,"prevTime"],[1,1859,99,22,"this"],[1,1864,99,27,"currentTime"],[1,1876,100,6,"this"],[1,1881,100,11,"inProgress"],[1,1892,100,24,"this"],[1,1897,100,29,"onScaleBegin"],[1,1910,100,42,"this"],[1,1917,104,8,"action"],[1,1921,104,19,"EventTypes"],[1,1923,104,29,"EventTypes"],[1,1934,104,30,"MOVE"],[1,1941,108,4,"this"],[1,1946,108,9,"_currentSpan"],[1,1959,108,24,"span"],[1,1961,110,8,"this"],[1,1966,110,13,"inProgress"],[1,1979,110,28,"this"],[1,1984,110,33,"onScale"],[1,1992,110,41,"this"],[1,2000,114,4,"this"],[1,2005,114,9,"prevSpan"],[1,2014,114,20,"this"],[1,2019,114,25,"currentSpan"],[1,2031,115,4,"this"],[1,2036,115,9,"prevTime"],[1,2045,115,20,"this"],[1,2050,115,25,"currentTime"],[1,2064,111,13],[1,2066,117,2],[1,2067,119,2,"calculateScaleFactor"],[1,2088,119,23,"numOfPointers"],[1,2091,120,4],[1,2098,120,8,"numOfPointers"],[1,2100,120,24],[1,2102,121,13],[1,2104,124,11,"this"],[1,2109,124,16,"prevSpan"],[1,2118,124,27],[1,2120,124,31,"this"],[1,2125,124,36,"currentSpan"],[1,2137,124,50,"this"],[1,2142,124,55,"prevSpan"],[1,2151,124,66],[1,2152,125,2],[1,2153,127,2],[1,2168,127,6,"currentSpan"],[1,2171,128,4],[1,2178,128,11,"this"],[1,2183,128,16,"_currentSpan"],[1,2195,129,2],[1,2196,131,2],[1,2206,131,6,"focusX"],[1,2209,132,4],[1,2216,132,11,"this"],[1,2221,132,16,"_focusX"],[1,2228,133,2],[1,2229,135,2],[1,2239,135,6,"focusY"],[1,2242,136,4],[1,2249,136,11,"this"],[1,2254,136,16,"_focusY"],[1,2261,137,2],[1,2262,139,2],[1,2275,139,6,"timeDelta"],[1,2278,140,4],[1,2285,140,11,"this"],[1,2290,140,16,"currentTime"],[1,2302,140,30,"this"],[1,2307,140,35,"prevTime"],[1,2315,141,2],[1,2317,143,1],[1,2320]],"functionMap":{"names":["_defineProperty","<global>","ScaleGestureDetector","constructor","onTouchEvent","tracker.trackedPointers.forEach$argument_0","calculateScaleFactor","get__currentSpan","get__focusX","get__focusY","get__timeDelta"],"mappings":"AAA,iNC;eCI;ECC;GDgC;EEE;oCC6B;KDO;GFyC;EIE;GJM;EKE;GLE;EME;GNE;EOE;GPE;EQE;GRE;CDE"},"hasCjsExports":false},"type":"js/module"}]}