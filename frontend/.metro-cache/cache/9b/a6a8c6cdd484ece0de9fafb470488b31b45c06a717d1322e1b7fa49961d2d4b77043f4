{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":69,"index":114}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Alert","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"PEUC6jrQVoAGZ2qYkvimljMOyJI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSaveResult = useSaveResult;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsAlert = require(_dependencyMap[3], \"react-native-web/dist/exports/Alert\");\n  var Alert = _interopDefault(_reactNativeWebDistExportsAlert);\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  function useSaveResult() {\n    _s();\n    const [hasSubscription, setHasSubscription] = (0, _react.useState)(false);\n    const [saving, setSaving] = (0, _react.useState)(false);\n    const [checkingSubscription, setCheckingSubscription] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkSubscription();\n    }, []);\n    const checkSubscription = async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('token');\n        if (!token) {\n          setHasSubscription(false);\n          setCheckingSubscription(false);\n          return;\n        }\n        const response = await fetch(`${API_URL}/api/user-profile/check-subscription`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setHasSubscription(data.has_subscription);\n        }\n      } catch (error) {\n        console.error('Error checking subscription:', error);\n      } finally {\n        setCheckingSubscription(false);\n      }\n    };\n    const saveResult = async params => {\n      if (!hasSubscription) {\n        Alert.default.alert('غير متاح', 'حفظ النتائج متاح للمشتركين فقط. اشترك في إحدى الباقات للاستفادة من هذه الميزة.', [{\n          text: 'حسناً'\n        }]);\n        return false;\n      }\n      try {\n        setSaving(true);\n        const token = await AsyncStorage.default.getItem('token');\n        const response = await fetch(`${API_URL}/api/user-results/save`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify(params)\n        });\n        if (response.ok) {\n          Alert.default.alert('تم الحفظ', 'تم حفظ النتيجة في ملفك الشخصي بنجاح');\n          return true;\n        } else {\n          const error = await response.json();\n          Alert.default.alert('خطأ', error.detail || 'حدث خطأ أثناء الحفظ');\n          return false;\n        }\n      } catch (error) {\n        console.error('Error saving result:', error);\n        Alert.default.alert('خطأ', 'حدث خطأ أثناء الحفظ');\n        return false;\n      } finally {\n        setSaving(false);\n      }\n    };\n    return {\n      hasSubscription,\n      checkingSubscription,\n      saving,\n      saveResult,\n      checkSubscription\n    };\n  }\n  _s(useSaveResult, \"UkNN0npF+jwoVJmfvGsn3zaDN7g=\");\n});","lineCount":95,"map":[[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"useSaveResult"],[13,23,16,0],[13,26,16,0,"useSaveResult"],[13,39,16,0],[14,2,96,1],[14,6,96,1,"_expoVirtualEnv"],[14,21,96,1],[14,24,96,1,"require"],[14,31,96,1],[14,32,96,1,"_dependencyMap"],[14,46,96,1],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,2,69],[18,6,2,69,"_reactNativeWebDistExportsAlert"],[18,37,2,69],[18,40,2,69,"require"],[18,47,2,69],[18,48,2,69,"_dependencyMap"],[18,62,2,69],[19,2,2,69],[19,6,2,69,"Alert"],[19,11,2,69],[19,14,2,69,"_interopDefault"],[19,29,2,69],[19,30,2,69,"_reactNativeWebDistExportsAlert"],[19,61,2,69],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"_expoVirtualEnv"],[20,33,5,16],[20,34,5,16,"env"],[20,37,5,16],[20,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[20,61,5,16],[20,65,5,55],[20,67,5,57],[21,2,16,7],[21,11,16,16,"useSaveResult"],[21,24,16,29,"useSaveResult"],[21,25,16,29],[21,27,16,32],[22,4,16,32,"_s"],[22,6,16,32],[23,4,17,2],[23,10,17,8],[23,11,17,9,"hasSubscription"],[23,26,17,24],[23,28,17,26,"setHasSubscription"],[23,46,17,44],[23,47,17,45],[23,50,17,48],[23,54,17,48,"useState"],[23,60,17,56],[23,61,17,56,"useState"],[23,69,17,56],[23,71,17,57],[23,76,17,62],[23,77,17,63],[24,4,18,2],[24,10,18,8],[24,11,18,9,"saving"],[24,17,18,15],[24,19,18,17,"setSaving"],[24,28,18,26],[24,29,18,27],[24,32,18,30],[24,36,18,30,"useState"],[24,42,18,38],[24,43,18,38,"useState"],[24,51,18,38],[24,53,18,39],[24,58,18,44],[24,59,18,45],[25,4,19,2],[25,10,19,8],[25,11,19,9,"checkingSubscription"],[25,31,19,29],[25,33,19,31,"setCheckingSubscription"],[25,56,19,54],[25,57,19,55],[25,60,19,58],[25,64,19,58,"useState"],[25,70,19,66],[25,71,19,66,"useState"],[25,79,19,66],[25,81,19,67],[25,85,19,71],[25,86,19,72],[26,4,21,2],[26,8,21,2,"useEffect"],[26,14,21,11],[26,15,21,11,"useEffect"],[26,24,21,11],[26,26,21,12],[26,32,21,18],[27,6,22,4,"checkSubscription"],[27,23,22,21],[27,24,22,22],[27,25,22,23],[28,4,23,2],[28,5,23,3],[28,7,23,5],[28,9,23,7],[28,10,23,8],[29,4,25,2],[29,10,25,8,"checkSubscription"],[29,27,25,25],[29,30,25,28],[29,36,25,28,"checkSubscription"],[29,37,25,28],[29,42,25,40],[30,6,26,4],[30,10,26,8],[31,8,27,6],[31,14,27,12,"token"],[31,19,27,17],[31,22,27,20],[31,28,27,26,"AsyncStorage"],[31,40,27,38],[31,41,27,38,"default"],[31,48,27,38],[31,49,27,39,"getItem"],[31,56,27,46],[31,57,27,47],[31,64,27,54],[31,65,27,55],[32,8,28,6],[32,12,28,10],[32,13,28,11,"token"],[32,18,28,16],[32,20,28,18],[33,10,29,8,"setHasSubscription"],[33,28,29,26],[33,29,29,27],[33,34,29,32],[33,35,29,33],[34,10,30,8,"setCheckingSubscription"],[34,33,30,31],[34,34,30,32],[34,39,30,37],[34,40,30,38],[35,10,31,8],[36,8,32,6],[37,8,34,6],[37,14,34,12,"response"],[37,22,34,20],[37,25,34,23],[37,31,34,29,"fetch"],[37,36,34,34],[37,37,34,35],[37,40,34,38,"API_URL"],[37,47,34,45],[37,85,34,83],[37,87,34,85],[38,10,35,8,"headers"],[38,17,35,15],[38,19,35,17],[39,12,35,19,"Authorization"],[39,25,35,32],[39,27,35,34],[39,37,35,44,"token"],[39,42,35,49],[40,10,35,52],[41,8,36,6],[41,9,36,7],[41,10,36,8],[42,8,38,6],[42,12,38,10,"response"],[42,20,38,18],[42,21,38,19,"ok"],[42,23,38,21],[42,25,38,23],[43,10,39,8],[43,16,39,14,"data"],[43,20,39,18],[43,23,39,21],[43,29,39,27,"response"],[43,37,39,35],[43,38,39,36,"json"],[43,42,39,40],[43,43,39,41],[43,44,39,42],[44,10,40,8,"setHasSubscription"],[44,28,40,26],[44,29,40,27,"data"],[44,33,40,31],[44,34,40,32,"has_subscription"],[44,50,40,48],[44,51,40,49],[45,8,41,6],[46,6,42,4],[46,7,42,5],[46,8,42,6],[46,15,42,13,"error"],[46,20,42,18],[46,22,42,20],[47,8,43,6,"console"],[47,15,43,13],[47,16,43,14,"error"],[47,21,43,19],[47,22,43,20],[47,52,43,50],[47,54,43,52,"error"],[47,59,43,57],[47,60,43,58],[48,6,44,4],[48,7,44,5],[48,16,44,14],[49,8,45,6,"setCheckingSubscription"],[49,31,45,29],[49,32,45,30],[49,37,45,35],[49,38,45,36],[50,6,46,4],[51,4,47,2],[51,5,47,3],[52,4,49,2],[52,10,49,8,"saveResult"],[52,20,49,18],[52,23,49,21],[52,29,49,28,"params"],[52,35,49,52],[52,39,49,75],[53,6,50,4],[53,10,50,8],[53,11,50,9,"hasSubscription"],[53,26,50,24],[53,28,50,26],[54,8,51,6,"Alert"],[54,13,51,11],[54,14,51,11,"default"],[54,21,51,11],[54,22,51,12,"alert"],[54,27,51,17],[54,28,52,8],[54,38,52,18],[54,40,53,8],[54,120,53,88],[54,122,54,8],[54,123,54,9],[55,10,54,11,"text"],[55,14,54,15],[55,16,54,17],[56,8,54,25],[56,9,54,26],[56,10,55,6],[56,11,55,7],[57,8,56,6],[57,15,56,13],[57,20,56,18],[58,6,57,4],[59,6,59,4],[59,10,59,8],[60,8,60,6,"setSaving"],[60,17,60,15],[60,18,60,16],[60,22,60,20],[60,23,60,21],[61,8,61,6],[61,14,61,12,"token"],[61,19,61,17],[61,22,61,20],[61,28,61,26,"AsyncStorage"],[61,40,61,38],[61,41,61,38,"default"],[61,48,61,38],[61,49,61,39,"getItem"],[61,56,61,46],[61,57,61,47],[61,64,61,54],[61,65,61,55],[62,8,63,6],[62,14,63,12,"response"],[62,22,63,20],[62,25,63,23],[62,31,63,29,"fetch"],[62,36,63,34],[62,37,63,35],[62,40,63,38,"API_URL"],[62,47,63,45],[62,71,63,69],[62,73,63,71],[63,10,64,8,"method"],[63,16,64,14],[63,18,64,16],[63,24,64,22],[64,10,65,8,"headers"],[64,17,65,15],[64,19,65,17],[65,12,66,10],[65,26,66,24],[65,28,66,26],[65,46,66,44],[66,12,67,10,"Authorization"],[66,25,67,23],[66,27,67,25],[66,37,67,35,"token"],[66,42,67,40],[67,10,68,8],[67,11,68,9],[68,10,69,8,"body"],[68,14,69,12],[68,16,69,14,"JSON"],[68,20,69,18],[68,21,69,19,"stringify"],[68,30,69,28],[68,31,69,29,"params"],[68,37,69,35],[69,8,70,6],[69,9,70,7],[69,10,70,8],[70,8,72,6],[70,12,72,10,"response"],[70,20,72,18],[70,21,72,19,"ok"],[70,23,72,21],[70,25,72,23],[71,10,73,8,"Alert"],[71,15,73,13],[71,16,73,13,"default"],[71,23,73,13],[71,24,73,14,"alert"],[71,29,73,19],[71,30,73,20],[71,40,73,30],[71,42,73,32],[71,79,73,69],[71,80,73,70],[72,10,74,8],[72,17,74,15],[72,21,74,19],[73,8,75,6],[73,9,75,7],[73,15,75,13],[74,10,76,8],[74,16,76,14,"error"],[74,21,76,19],[74,24,76,22],[74,30,76,28,"response"],[74,38,76,36],[74,39,76,37,"json"],[74,43,76,41],[74,44,76,42],[74,45,76,43],[75,10,77,8,"Alert"],[75,15,77,13],[75,16,77,13,"default"],[75,23,77,13],[75,24,77,14,"alert"],[75,29,77,19],[75,30,77,20],[75,35,77,25],[75,37,77,27,"error"],[75,42,77,32],[75,43,77,33,"detail"],[75,49,77,39],[75,53,77,43],[75,74,77,64],[75,75,77,65],[76,10,78,8],[76,17,78,15],[76,22,78,20],[77,8,79,6],[78,6,80,4],[78,7,80,5],[78,8,80,6],[78,15,80,13,"error"],[78,20,80,18],[78,22,80,20],[79,8,81,6,"console"],[79,15,81,13],[79,16,81,14,"error"],[79,21,81,19],[79,22,81,20],[79,44,81,42],[79,46,81,44,"error"],[79,51,81,49],[79,52,81,50],[80,8,82,6,"Alert"],[80,13,82,11],[80,14,82,11,"default"],[80,21,82,11],[80,22,82,12,"alert"],[80,27,82,17],[80,28,82,18],[80,33,82,23],[80,35,82,25],[80,56,82,46],[80,57,82,47],[81,8,83,6],[81,15,83,13],[81,20,83,18],[82,6,84,4],[82,7,84,5],[82,16,84,14],[83,8,85,6,"setSaving"],[83,17,85,15],[83,18,85,16],[83,23,85,21],[83,24,85,22],[84,6,86,4],[85,4,87,2],[85,5,87,3],[86,4,89,2],[86,11,89,9],[87,6,90,4,"hasSubscription"],[87,21,90,19],[88,6,91,4,"checkingSubscription"],[88,26,91,24],[89,6,92,4,"saving"],[89,12,92,10],[90,6,93,4,"saveResult"],[90,16,93,14],[91,6,94,4,"checkSubscription"],[92,4,95,2],[92,5,95,3],[93,2,96,0],[94,2,96,1,"_s"],[94,4,96,1],[94,5,16,16,"useSaveResult"],[94,18,16,29],[95,0,16,29],[95,3]],"functionMap":{"names":["<global>","useSaveResult","useEffect$argument_0","checkSubscription","saveResult"],"mappings":"AAA;OCe;YCK;GDE;4BEE;GFsB;qBGE;GHsC;CDS"},"hasCjsExports":false},"type":"js/module"}]}