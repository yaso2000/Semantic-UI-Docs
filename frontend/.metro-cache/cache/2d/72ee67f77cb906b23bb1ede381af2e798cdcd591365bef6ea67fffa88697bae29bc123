{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":44,"index":206},"end":{"line":6,"column":91,"index":253}}],"key":"F+ExrfS9dcoZxXJOBwTmx09hji8=","exportNames":["*"],"imports":1}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":40,"index":296},"end":{"line":7,"column":69,"index":325}}],"key":"ePiUN85REKH0vTLGPPDgdWgjFww=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";var e=r(d[0]).default;_e.__esModule=!0,_e.default=void 0;var t=e(r(d[1])),s=e(r(d[2]));_e.default=class{constructor(e){var t=e.onMoreTasks;this._onMoreTasks=t,this._queueStack=[{tasks:[],popable:!0}]}enqueue(e){this._getCurrentQueue().push(e)}enqueueTasks(e){e.forEach(e=>this.enqueue(e))}cancelTasks(e){this._queueStack=this._queueStack.map(s=>(0,t.default)((0,t.default)({},s),{},{tasks:s.tasks.filter(t=>-1===e.indexOf(t))})).filter((e,t)=>e.tasks.length>0||0===t)}hasTasksToProcess(){return this._getCurrentQueue().length>0}processNext(){var e=this._getCurrentQueue();if(e.length){var t=e.shift();try{'object'==typeof t&&t.gen?this._genPromise(t):'object'==typeof t&&t.run?t.run():((0,s.default)('function'==typeof t,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(t,null,2)),t())}catch(e){throw e.message='TaskQueue: Error with task '+(t.name||'')+': '+e.message,e}}}_getCurrentQueue(){var e=this._queueStack.length-1,t=this._queueStack[e];return t.popable&&0===t.tasks.length&&e>0?(this._queueStack.pop(),this._getCurrentQueue()):t.tasks}_genPromise(e){var t=this._queueStack.push({tasks:[],popable:!1})-1,s=this._queueStack[t];e.gen().then(()=>{s.popable=!0,this.hasTasksToProcess()&&this._onMoreTasks()}).catch(t=>{setTimeout(()=>{throw t.message=\"TaskQueue: Error resolving Promise in task \"+e.name+\": \"+t.message,t},0)})}};m.exports=_e.default});","lineCount":1,"map":[[1,29,1,0],[1,42,3,0],[1,46,3,4,"_interopRequireDefault"],[1,48,3,29,"require"],[1,50,3,36,"d"],[1,52,3,36],[1,56,3,85,"default"],[1,64,4,0,"exports"],[1,67,4,8,"__esModule"],[1,79,4,21],[1,81,5,0,"exports"],[1,84,5,8,"default"],[1,97,5,15,"undefined"],[1,99,6,0],[1,103,6,4,"_objectSpread2"],[1,105,6,21,"_interopRequireDefault"],[1,107,6,44,"require"],[1,109,6,51,"d"],[1,111,6,51],[1,116,7,4,"_invariant"],[1,118,7,17,"_interopRequireDefault"],[1,120,7,40,"require"],[1,122,7,47,"d"],[1,124,7,47],[1,129,92,15,"exports"],[1,132,92,23,"default"],[1,140,18,0],[1,146,19,2,"constructor"],[1,158,19,14,"_ref"],[1,161,20,4],[1,165,20,8,"onMoreTasks"],[1,167,20,22,"_ref"],[1,169,20,27,"onMoreTasks"],[1,181,21,4,"this"],[1,186,21,9,"_onMoreTasks"],[1,199,21,24,"onMoreTasks"],[1,201,22,4,"this"],[1,206,22,9,"_queueStack"],[1,218,22,23],[1,219,22,24],[1,220,23,6,"tasks"],[1,226,23,13],[1,229,24,6,"popable"],[1,238,24,15],[1,241,26,2],[1,242,27,2,"enqueue"],[1,250,27,10,"task"],[1,253,28,4,"this"],[1,258,28,9,"_getCurrentQueue"],[1,277,28,28,"push"],[1,282,28,33,"task"],[1,284,29,2],[1,285,30,2,"enqueueTasks"],[1,298,30,15,"tasks"],[1,301,31,4,"tasks"],[1,303,31,10,"forEach"],[1,311,31,18,"task"],[1,314,31,26,"this"],[1,319,31,31,"enqueue"],[1,327,31,39,"task"],[1,330,32,2],[1,331,33,2,"cancelTasks"],[1,343,33,14,"tasksToCancel"],[1,346,34,4,"this"],[1,351,34,9,"_queueStack"],[1,363,34,23,"this"],[1,368,34,28,"_queueStack"],[1,380,34,40,"map"],[1,384,34,44,"queue"],[1,388,34,53],[1,390,34,57,"_objectSpread2"],[1,392,34,72,"default"],[1,402,34,81],[1,404,34,85,"_objectSpread2"],[1,406,34,100,"default"],[1,415,34,109],[1,416,34,110],[1,418,34,113,"queue"],[1,421,34,121],[1,422,34,122],[1,424,34,125],[1,425,35,6,"tasks"],[1,431,35,13,"queue"],[1,433,35,19,"tasks"],[1,439,35,25,"filter"],[1,446,35,32,"task"],[1,450,35,67],[1,454,35,40,"tasksToCancel"],[1,456,35,54,"indexOf"],[1,464,35,62,"task"],[1,471,36,8,"filter"],[1,478,36,15],[1,479,36,16,"queue"],[1,481,36,23,"idx"],[1,485,36,31,"queue"],[1,487,36,37,"tasks"],[1,493,36,43,"length"],[1,500,36,52],[1,503,36,65],[1,507,36,57,"idx"],[1,509,37,2],[1,510,38,2,"hasTasksToProcess"],[1,530,39,4],[1,537,39,11,"this"],[1,542,39,16,"_getCurrentQueue"],[1,561,39,35,"length"],[1,568,39,44],[1,569,40,2],[1,570,45,2,"processNext"],[1,584,46,4],[1,588,46,8,"queue"],[1,590,46,16,"this"],[1,595,46,21,"_getCurrentQueue"],[1,614,47,4],[1,617,47,8,"queue"],[1,619,47,14,"length"],[1,626,47,22],[1,627,48,6],[1,631,48,10,"task"],[1,633,48,17,"queue"],[1,635,48,23,"shift"],[1,643,49,6],[1,647,50,28],[1,664,50,19,"task"],[1,667,50,40,"task"],[1,669,50,45,"gen"],[1,673,51,10,"this"],[1,678,51,15,"_genPromise"],[1,690,51,27,"task"],[1,693,52,35],[1,710,52,26,"task"],[1,713,52,47,"task"],[1,715,52,52,"run"],[1,719,53,10,"task"],[1,721,53,15,"run"],[1,729,55,10],[1,731,55,14,"_invariant"],[1,733,55,25,"default"],[1,742,55,50],[1,761,55,41,"task"],[1,763,55,62],[1,823,55,124,"JSON"],[1,828,55,129,"stringify"],[1,838,55,139,"task"],[1,840,55,145],[1,845,55,151],[1,849,56,10,"task"],[1,853,58,6],[1,854,58,8],[1,860,58,15,"e"],[1,863,60,8],[1,869,59,8,"e"],[1,871,59,10,"message"],[1,879,59,20],[1,910,59,53,"task"],[1,912,59,58,"name"],[1,918,59,66],[1,922,59,72],[1,927,59,79,"e"],[1,929,59,81,"message"],[1,937,60,14,"e"],[1,938,61,6],[1,939,62,4],[1,940,63,2],[1,941,64,2,"_getCurrentQueue"],[1,960,65,4],[1,964,65,8,"stackIdx"],[1,966,65,19,"this"],[1,971,65,24,"_queueStack"],[1,983,65,36,"length"],[1,990,65,45],[1,992,66,8,"queue"],[1,994,66,16,"this"],[1,999,66,21,"_queueStack"],[1,1011,66,33,"stackIdx"],[1,1014,67,4],[1,1021,67,8,"queue"],[1,1023,67,14,"popable"],[1,1032,67,48],[1,1036,67,25,"queue"],[1,1038,67,31,"tasks"],[1,1044,67,37,"length"],[1,1052,67,53,"stackIdx"],[1,1054,67,64],[1,1057,68,6,"this"],[1,1062,68,11,"_queueStack"],[1,1074,68,23,"pop"],[1,1080,69,13,"this"],[1,1085,69,18,"_getCurrentQueue"],[1,1105,71,13,"queue"],[1,1107,71,19,"tasks"],[1,1112,73,2],[1,1113,74,2,"_genPromise"],[1,1125,74,14,"task"],[1,1128,75,4],[1,1132,79,8,"stackIdx"],[1,1134,75,17,"this"],[1,1139,75,22,"_queueStack"],[1,1151,75,34,"push"],[1,1156,75,39],[1,1157,76,6,"tasks"],[1,1163,76,13],[1,1166,77,6,"popable"],[1,1175,77,15],[1,1179,79,28],[1,1181,80,8,"stackItem"],[1,1183,80,20,"this"],[1,1188,80,25,"_queueStack"],[1,1200,80,37,"stackIdx"],[1,1203,81,4,"task"],[1,1205,81,9,"gen"],[1,1211,81,15,"then"],[1,1216,81,20],[1,1221,82,6,"stackItem"],[1,1223,82,16,"popable"],[1,1232,82,26],[1,1234,83,6,"this"],[1,1239,83,11,"hasTasksToProcess"],[1,1260,83,34,"this"],[1,1265,83,39,"_onMoreTasks"],[1,1282,84,7,"catch"],[1,1288,84,13,"ex"],[1,1292,85,6,"setTimeout"],[1,1303,85,17],[1,1308,87,8],[1,1314,86,8,"ex"],[1,1316,86,11,"message"],[1,1324,86,21],[1,1370,86,69,"task"],[1,1372,86,74,"name"],[1,1377,86,81],[1,1382,86,88,"ex"],[1,1384,86,91,"message"],[1,1392,87,14,"ex"],[1,1395,88,9],[1,1399,90,2],[1,1402,93,0,"module"],[1,1404,93,7,"exports"],[1,1412,93,17,"exports"],[1,1415,93,25,"default"],[1,1422,93,33],[1,1425]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACiB;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"},"hasCjsExports":true},"type":"js/module"}]}