{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":69,"index":114}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":115},"end":{"line":3,"column":37,"index":152}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useSaveResult = useSaveResult;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _expoVirtualEnv = require(_dependencyMap[2], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[3], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[4], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNative = require(_dependencyMap[5], \"react-native\");\n  var API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  function useSaveResult() {\n    _s();\n    var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      hasSubscription = _useState2[0],\n      setHasSubscription = _useState2[1];\n    var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray.default)(_useState3, 2),\n      saving = _useState4[0],\n      setSaving = _useState4[1];\n    var _useState5 = (0, _react.useState)(true),\n      _useState6 = (0, _slicedToArray.default)(_useState5, 2),\n      checkingSubscription = _useState6[0],\n      setCheckingSubscription = _useState6[1];\n    (0, _react.useEffect)(() => {\n      checkSubscription();\n    }, []);\n    var checkSubscription = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        try {\n          var token = yield AsyncStorage.default.getItem('token');\n          if (!token) {\n            setHasSubscription(false);\n            setCheckingSubscription(false);\n            return;\n          }\n          var response = yield fetch(`${API_URL}/api/user-profile/check-subscription`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          if (response.ok) {\n            var data = yield response.json();\n            setHasSubscription(data.has_subscription);\n          }\n        } catch (error) {\n          console.error('Error checking subscription:', error);\n        } finally {\n          setCheckingSubscription(false);\n        }\n      });\n      return function checkSubscription() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var saveResult = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* (params) {\n        if (!hasSubscription) {\n          _reactNative.Alert.alert('غير متاح', 'حفظ النتائج متاح للمشتركين فقط. اشترك في إحدى الباقات للاستفادة من هذه الميزة.', [{\n            text: 'حسناً'\n          }]);\n          return false;\n        }\n        try {\n          setSaving(true);\n          var token = yield AsyncStorage.default.getItem('token');\n          var response = yield fetch(`${API_URL}/api/user-results/save`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${token}`\n            },\n            body: JSON.stringify(params)\n          });\n          if (response.ok) {\n            _reactNative.Alert.alert('تم الحفظ', 'تم حفظ النتيجة في ملفك الشخصي بنجاح');\n            return true;\n          } else {\n            var error = yield response.json();\n            _reactNative.Alert.alert('خطأ', error.detail || 'حدث خطأ أثناء الحفظ');\n            return false;\n          }\n        } catch (error) {\n          console.error('Error saving result:', error);\n          _reactNative.Alert.alert('خطأ', 'حدث خطأ أثناء الحفظ');\n          return false;\n        } finally {\n          setSaving(false);\n        }\n      });\n      return function saveResult(_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    return {\n      hasSubscription,\n      checkingSubscription,\n      saving,\n      saveResult,\n      checkSubscription\n    };\n  }\n  _s(useSaveResult, \"UkNN0npF+jwoVJmfvGsn3zaDN7g=\");\n});","lineCount":117,"map":[[13,2,16,0,"exports"],[13,9,16,0],[13,10,16,0,"useSaveResult"],[13,23,16,0],[13,26,16,0,"useSaveResult"],[13,39,16,0],[14,2,96,1],[14,6,96,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,96,1],[14,45,96,1,"require"],[14,52,96,1],[14,53,96,1,"_dependencyMap"],[14,67,96,1],[15,2,96,1],[15,6,96,1,"_asyncToGenerator"],[15,23,96,1],[15,26,96,1,"_interopDefault"],[15,41,96,1],[15,42,96,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,96,1],[16,2,96,1],[16,6,96,1,"_babelRuntimeHelpersSlicedToArray"],[16,39,96,1],[16,42,96,1,"require"],[16,49,96,1],[16,50,96,1,"_dependencyMap"],[16,64,96,1],[17,2,96,1],[17,6,96,1,"_slicedToArray"],[17,20,96,1],[17,23,96,1,"_interopDefault"],[17,38,96,1],[17,39,96,1,"_babelRuntimeHelpersSlicedToArray"],[17,72,96,1],[18,2,96,1],[18,6,96,1,"_expoVirtualEnv"],[18,21,96,1],[18,24,96,1,"require"],[18,31,96,1],[18,32,96,1,"_dependencyMap"],[18,46,96,1],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,3,0],[22,6,3,0,"_reactNative"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,5,0],[23,6,5,6,"API_URL"],[23,13,5,13],[23,16,5,16,"_expoVirtualEnv"],[23,31,5,16],[23,32,5,16,"env"],[23,35,5,16],[23,36,5,16,"EXPO_PUBLIC_BACKEND_URL"],[23,59,5,16],[23,63,5,55],[23,65,5,57],[24,2,16,7],[24,11,16,16,"useSaveResult"],[24,24,16,29,"useSaveResult"],[24,25,16,29],[24,27,16,32],[25,4,16,32,"_s"],[25,6,16,32],[26,4,17,2],[26,8,17,2,"_useState"],[26,17,17,2],[26,20,17,48],[26,24,17,48,"useState"],[26,30,17,56],[26,31,17,56,"useState"],[26,39,17,56],[26,41,17,57],[26,46,17,62],[26,47,17,63],[27,6,17,63,"_useState2"],[27,16,17,63],[27,23,17,63,"_slicedToArray"],[27,37,17,63],[27,38,17,63,"default"],[27,45,17,63],[27,47,17,63,"_useState"],[27,56,17,63],[28,6,17,9,"hasSubscription"],[28,21,17,24],[28,24,17,24,"_useState2"],[28,34,17,24],[29,6,17,26,"setHasSubscription"],[29,24,17,44],[29,27,17,44,"_useState2"],[29,37,17,44],[30,4,18,2],[30,8,18,2,"_useState3"],[30,18,18,2],[30,21,18,30],[30,25,18,30,"useState"],[30,31,18,38],[30,32,18,38,"useState"],[30,40,18,38],[30,42,18,39],[30,47,18,44],[30,48,18,45],[31,6,18,45,"_useState4"],[31,16,18,45],[31,23,18,45,"_slicedToArray"],[31,37,18,45],[31,38,18,45,"default"],[31,45,18,45],[31,47,18,45,"_useState3"],[31,57,18,45],[32,6,18,9,"saving"],[32,12,18,15],[32,15,18,15,"_useState4"],[32,25,18,15],[33,6,18,17,"setSaving"],[33,15,18,26],[33,18,18,26,"_useState4"],[33,28,18,26],[34,4,19,2],[34,8,19,2,"_useState5"],[34,18,19,2],[34,21,19,58],[34,25,19,58,"useState"],[34,31,19,66],[34,32,19,66,"useState"],[34,40,19,66],[34,42,19,67],[34,46,19,71],[34,47,19,72],[35,6,19,72,"_useState6"],[35,16,19,72],[35,23,19,72,"_slicedToArray"],[35,37,19,72],[35,38,19,72,"default"],[35,45,19,72],[35,47,19,72,"_useState5"],[35,57,19,72],[36,6,19,9,"checkingSubscription"],[36,26,19,29],[36,29,19,29,"_useState6"],[36,39,19,29],[37,6,19,31,"setCheckingSubscription"],[37,29,19,54],[37,32,19,54,"_useState6"],[37,42,19,54],[38,4,21,2],[38,8,21,2,"useEffect"],[38,14,21,11],[38,15,21,11,"useEffect"],[38,24,21,11],[38,26,21,12],[38,32,21,18],[39,6,22,4,"checkSubscription"],[39,23,22,21],[39,24,22,22],[39,25,22,23],[40,4,23,2],[40,5,23,3],[40,7,23,5],[40,9,23,7],[40,10,23,8],[41,4,25,2],[41,8,25,8,"checkSubscription"],[41,25,25,25],[42,6,25,25],[42,10,25,25,"_ref"],[42,14,25,25],[42,21,25,25,"_asyncToGenerator"],[42,38,25,25],[42,39,25,25,"default"],[42,46,25,25],[42,48,25,28],[42,61,25,40],[43,8,26,4],[43,12,26,8],[44,10,27,6],[44,14,27,12,"token"],[44,19,27,17],[44,28,27,26,"AsyncStorage"],[44,40,27,38],[44,41,27,38,"default"],[44,48,27,38],[44,49,27,39,"getItem"],[44,56,27,46],[44,57,27,47],[44,64,27,54],[44,65,27,55],[45,10,28,6],[45,14,28,10],[45,15,28,11,"token"],[45,20,28,16],[45,22,28,18],[46,12,29,8,"setHasSubscription"],[46,30,29,26],[46,31,29,27],[46,36,29,32],[46,37,29,33],[47,12,30,8,"setCheckingSubscription"],[47,35,30,31],[47,36,30,32],[47,41,30,37],[47,42,30,38],[48,12,31,8],[49,10,32,6],[50,10,34,6],[50,14,34,12,"response"],[50,22,34,20],[50,31,34,29,"fetch"],[50,36,34,34],[50,37,34,35],[50,40,34,38,"API_URL"],[50,47,34,45],[50,85,34,83],[50,87,34,85],[51,12,35,8,"headers"],[51,19,35,15],[51,21,35,17],[52,14,35,19,"Authorization"],[52,27,35,32],[52,29,35,34],[52,39,35,44,"token"],[52,44,35,49],[53,12,35,52],[54,10,36,6],[54,11,36,7],[54,12,36,8],[55,10,38,6],[55,14,38,10,"response"],[55,22,38,18],[55,23,38,19,"ok"],[55,25,38,21],[55,27,38,23],[56,12,39,8],[56,16,39,14,"data"],[56,20,39,18],[56,29,39,27,"response"],[56,37,39,35],[56,38,39,36,"json"],[56,42,39,40],[56,43,39,41],[56,44,39,42],[57,12,40,8,"setHasSubscription"],[57,30,40,26],[57,31,40,27,"data"],[57,35,40,31],[57,36,40,32,"has_subscription"],[57,52,40,48],[57,53,40,49],[58,10,41,6],[59,8,42,4],[59,9,42,5],[59,10,42,6],[59,17,42,13,"error"],[59,22,42,18],[59,24,42,20],[60,10,43,6,"console"],[60,17,43,13],[60,18,43,14,"error"],[60,23,43,19],[60,24,43,20],[60,54,43,50],[60,56,43,52,"error"],[60,61,43,57],[60,62,43,58],[61,8,44,4],[61,9,44,5],[61,18,44,14],[62,10,45,6,"setCheckingSubscription"],[62,33,45,29],[62,34,45,30],[62,39,45,35],[62,40,45,36],[63,8,46,4],[64,6,47,2],[64,7,47,3],[65,6,47,3],[65,22,25,8,"checkSubscription"],[65,39,25,25,"checkSubscription"],[65,40,25,25],[66,8,25,25],[66,15,25,25,"_ref"],[66,19,25,25],[66,20,25,25,"apply"],[66,25,25,25],[66,32,25,25,"arguments"],[66,41,25,25],[67,6,25,25],[68,4,25,25],[68,7,47,3],[69,4,49,2],[69,8,49,8,"saveResult"],[69,18,49,18],[70,6,49,18],[70,10,49,18,"_ref2"],[70,15,49,18],[70,22,49,18,"_asyncToGenerator"],[70,39,49,18],[70,40,49,18,"default"],[70,47,49,18],[70,49,49,21],[70,60,49,28,"params"],[70,66,49,52],[70,68,49,75],[71,8,50,4],[71,12,50,8],[71,13,50,9,"hasSubscription"],[71,28,50,24],[71,30,50,26],[72,10,51,6,"Alert"],[72,22,51,11],[72,23,51,11,"Alert"],[72,28,51,11],[72,29,51,12,"alert"],[72,34,51,17],[72,35,52,8],[72,45,52,18],[72,47,53,8],[72,127,53,88],[72,129,54,8],[72,130,54,9],[73,12,54,11,"text"],[73,16,54,15],[73,18,54,17],[74,10,54,25],[74,11,54,26],[74,12,55,6],[74,13,55,7],[75,10,56,6],[75,17,56,13],[75,22,56,18],[76,8,57,4],[77,8,59,4],[77,12,59,8],[78,10,60,6,"setSaving"],[78,19,60,15],[78,20,60,16],[78,24,60,20],[78,25,60,21],[79,10,61,6],[79,14,61,12,"token"],[79,19,61,17],[79,28,61,26,"AsyncStorage"],[79,40,61,38],[79,41,61,38,"default"],[79,48,61,38],[79,49,61,39,"getItem"],[79,56,61,46],[79,57,61,47],[79,64,61,54],[79,65,61,55],[80,10,63,6],[80,14,63,12,"response"],[80,22,63,20],[80,31,63,29,"fetch"],[80,36,63,34],[80,37,63,35],[80,40,63,38,"API_URL"],[80,47,63,45],[80,71,63,69],[80,73,63,71],[81,12,64,8,"method"],[81,18,64,14],[81,20,64,16],[81,26,64,22],[82,12,65,8,"headers"],[82,19,65,15],[82,21,65,17],[83,14,66,10],[83,28,66,24],[83,30,66,26],[83,48,66,44],[84,14,67,10,"Authorization"],[84,27,67,23],[84,29,67,25],[84,39,67,35,"token"],[84,44,67,40],[85,12,68,8],[85,13,68,9],[86,12,69,8,"body"],[86,16,69,12],[86,18,69,14,"JSON"],[86,22,69,18],[86,23,69,19,"stringify"],[86,32,69,28],[86,33,69,29,"params"],[86,39,69,35],[87,10,70,6],[87,11,70,7],[87,12,70,8],[88,10,72,6],[88,14,72,10,"response"],[88,22,72,18],[88,23,72,19,"ok"],[88,25,72,21],[88,27,72,23],[89,12,73,8,"Alert"],[89,24,73,13],[89,25,73,13,"Alert"],[89,30,73,13],[89,31,73,14,"alert"],[89,36,73,19],[89,37,73,20],[89,47,73,30],[89,49,73,32],[89,86,73,69],[89,87,73,70],[90,12,74,8],[90,19,74,15],[90,23,74,19],[91,10,75,6],[91,11,75,7],[91,17,75,13],[92,12,76,8],[92,16,76,14,"error"],[92,21,76,19],[92,30,76,28,"response"],[92,38,76,36],[92,39,76,37,"json"],[92,43,76,41],[92,44,76,42],[92,45,76,43],[93,12,77,8,"Alert"],[93,24,77,13],[93,25,77,13,"Alert"],[93,30,77,13],[93,31,77,14,"alert"],[93,36,77,19],[93,37,77,20],[93,42,77,25],[93,44,77,27,"error"],[93,49,77,32],[93,50,77,33,"detail"],[93,56,77,39],[93,60,77,43],[93,81,77,64],[93,82,77,65],[94,12,78,8],[94,19,78,15],[94,24,78,20],[95,10,79,6],[96,8,80,4],[96,9,80,5],[96,10,80,6],[96,17,80,13,"error"],[96,22,80,18],[96,24,80,20],[97,10,81,6,"console"],[97,17,81,13],[97,18,81,14,"error"],[97,23,81,19],[97,24,81,20],[97,46,81,42],[97,48,81,44,"error"],[97,53,81,49],[97,54,81,50],[98,10,82,6,"Alert"],[98,22,82,11],[98,23,82,11,"Alert"],[98,28,82,11],[98,29,82,12,"alert"],[98,34,82,17],[98,35,82,18],[98,40,82,23],[98,42,82,25],[98,63,82,46],[98,64,82,47],[99,10,83,6],[99,17,83,13],[99,22,83,18],[100,8,84,4],[100,9,84,5],[100,18,84,14],[101,10,85,6,"setSaving"],[101,19,85,15],[101,20,85,16],[101,25,85,21],[101,26,85,22],[102,8,86,4],[103,6,87,2],[103,7,87,3],[104,6,87,3],[104,22,49,8,"saveResult"],[104,32,49,18,"saveResult"],[104,33,49,18,"_x"],[104,35,49,18],[105,8,49,18],[105,15,49,18,"_ref2"],[105,20,49,18],[105,21,49,18,"apply"],[105,26,49,18],[105,33,49,18,"arguments"],[105,42,49,18],[106,6,49,18],[107,4,49,18],[107,7,87,3],[108,4,89,2],[108,11,89,9],[109,6,90,4,"hasSubscription"],[109,21,90,19],[110,6,91,4,"checkingSubscription"],[110,26,91,24],[111,6,92,4,"saving"],[111,12,92,10],[112,6,93,4,"saveResult"],[112,16,93,14],[113,6,94,4,"checkSubscription"],[114,4,95,2],[114,5,95,3],[115,2,96,0],[116,2,96,1,"_s"],[116,4,96,1],[116,5,16,16,"useSaveResult"],[116,18,16,29],[117,0,16,29],[117,3]],"functionMap":{"names":["<global>","useSaveResult","useEffect$argument_0","checkSubscription","saveResult"],"mappings":"AAA;OCe;YCK;GDE;4BEE;GFsB;qBGE;GHsC;CDS"},"hasCjsExports":false},"type":"js/module"}]}